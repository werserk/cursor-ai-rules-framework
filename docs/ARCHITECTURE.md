# Documentation System Architecture

## What This System Does

This documentation system provides a **unified development workflow** with **dual validation**:

### âœ… **Dual Validation Approach**
- **Coding Style Validation**: All code validates against `project_coding_style_analysis.json`
- **Template Validation**: All code validates against user-selected templates
- **Solution Proposals**: When violations detected, system proposes corrected code
- **User Control**: User selects templates and approves all changes

### ðŸŽ¯ **Single Source of Truth**
- **Coding Style**: `docs/guidelines/project_coding_style_analysis.json` (mandatory)
- **General Guidelines**: `docs/guidelines/` (best practices)
- **Feature Requirements**: `docs/active/features/[feature-name]/` (user-prepared)
- **Implementation Templates**: `docs/templates/` (user-selectable)

## How It Works

## Architectural Principles

### 1. Unified Workflow Design
- **Single Process**: No more corporate/startup/balanced contexts
- **JSON-Driven Style**: Coding style defined by `project_coding_style_analysis.json`
- **Guidelines-Driven**: General guidelines from `docs/guidelines/`
- **Feature-Driven Requirements**: User prepares guidelines in `docs/active/features/[feature-name]/`

### 2. Dual Validation Architecture
- **JSON Validation**: Naming, error handling, testing framework, architectural patterns
- **Guidelines Validation**: General guidelines + feature-specific requirements
- **Violation Handling**: System proposes solutions instead of rejecting
- **User Approval**: Mandatory for all commits

### 3. Hierarchical Organization
- **Guidelines**: Coding style JSON + general best practices
- **Active Features**: Feature-specific guidelines (user-prepared)
- **Templates**: User-selectable base templates (corporate or startup)
- **Active Tasks**: Generated task plans with dual validation
- **Workflow**: Automated execution with safety protocols

## System Components

### Guidelines Layer (`docs/guidelines/`)
**Purpose**: Coding style rules and general guidelines
**Structure**:
```
docs/guidelines/
â”œâ”€â”€ project_coding_style_analysis.json  # MANDATORY coding style
â””â”€â”€ [general guidelines files]          # General best practices
```
**Current Status**: JSON present, general guidelines as needed

**Characteristics**:
- **Single Source of Truth**: `project_coding_style_analysis.json` defines all coding rules
- **General Guidelines**: Best practices applicable across features
- **Validation Source**: Primary validation source for all commits
- **Stable**: Changes infrequently, mainly project-wide standards

### Templates Layer (`docs/templates/`)
**Purpose**: User-selectable implementation templates
**Structure**:
```
docs/templates/
â”œâ”€â”€ corporate/         # Comprehensive templates
â”‚   â”œâ”€â”€ template-corporate-feature.md
â”‚   â”œâ”€â”€ template-corporate-logging.md
â”‚   â”œâ”€â”€ template-corporate-openapi.yaml
â”‚   â”œâ”€â”€ template-corporate-PRD.md
â”‚   â”œâ”€â”€ template-corporate-task.md
â”‚   â”œâ”€â”€ template-corporate-tech.md
â”‚   â””â”€â”€ template-corporate-testing.md
â””â”€â”€ startup/          # Quick templates
    â”œâ”€â”€ template-startup-feature.md
    â”œâ”€â”€ template-startup-logging.md
    â”œâ”€â”€ template-startup-task.md
    â”œâ”€â”€ template-startup-tech.md
    â””â”€â”€ template-startup-testing.md
```
**Current Status**: Fully implemented, user selects which to use

**Characteristics**:
- **User-Selectable**: User chooses corporate or startup templates
- **Base for Features**: Starting point for feature guidelines in `docs/active/features/[feature-name]/`
- **Reference Material**: Used as base when creating feature-specific guidelines
- **NOT Mandatory**: Templates are optional starting points, not enforced

### Active Work Layer (`docs/active/`)
**Purpose**: Feature-specific guidelines and generated task plans
**Structure**:
```
docs/active/
â”œâ”€â”€ features/
â”‚   â””â”€â”€ [feature-name]/                # Feature-specific guidelines (user-prepared)
â”‚       â”œâ”€â”€ feature-requirements.md
â”‚       â”œâ”€â”€ feature-logging.md
â”‚       â”œâ”€â”€ feature-testing.md
â”‚       â””â”€â”€ feature-tech.md
â””â”€â”€ tasks/                             # Generated task plans
    â””â”€â”€ [date]-[feature-name]-task.md
```
**Current Status**: Features prepared by user, tasks generated by plan.md

**Characteristics**:
- **Feature Guidelines**: User-prepared, specific to each feature
- **Generated Tasks**: Created by plan.md automatically
- **Standard Naming**: `[date]-[feature-name]-task.md` format
- **Dual Validation**: Validates against JSON + guidelines
- **Temporary**: Tasks can be archived after completion

### Workflow Layer (`.cursor/rules/workflow/`)
**Purpose**: Automated execution with dual validation
**Components**:
- **plan.md**: Create task plans by reading from `docs/guidelines/` and `docs/active/features/[feature-name]/`
- **execute.md**: Execute tasks with dual validation (JSON + guidelines)
- **Safety protocols**: User authorization, violation handling, solution proposals

**Current Status**: Fully implemented with unified workflow
- **plan.md**: Reads JSON + general guidelines + feature-specific guidelines
- **execute.md**: Validates against JSON + guidelines, proposes solutions
- **execute.md**: Working with globs `["docs/active/tasks/*.md"]`
- **Safety protocols**: User authorization, push prohibition, rollback mechanisms
- **Path verification**: All referenced paths exist and are functional

## Data Flow Architecture

### 1. Guidelines Creation
```
General Requirements â†’ Guidelines Definition â†’ Context-Specific Guidelines
```

### 2. Template Creation
```
Guidelines â†’ Template Generation â†’ Context-Aware Templates
```

### 3. Active Work Creation
```
Templates â†’ Feature/Task Creation â†’ Feature-Specific Guidelines
```

### 4. Workflow Execution
```
Active Work â†’ Feature-Specific Guidelines + General Guidelines â†’ Automated Execution â†’ User Authorization
```

## Integration Patterns

### 1. Guidelines Integration
- **General guidelines** provide the foundation and best practices
- **Context-specific guidelines** adapt to project needs (corporate vs startup)
- **Feature-specific guidelines** extend and customize general guidelines
- **Integration approach** combines feature-specific AND general guidelines for complete coverage
- **Consistent application** across all development work

### 2. Template Integration
- **Templates** provide starting points
- **Guidelines** provide the framework
- **Active work** provides the specifics
- **Workflow** provides the execution

### 3. Workflow Integration
- **Automated execution** where possible
- **Manual oversight** for critical decisions
- **User authorization** for all commits
- **Safety protocols** for all operations

## Quality Assurance Architecture

### 1. Guidelines Compliance
- **Feature guidelines** must extend and integrate with general guidelines
- **No duplication** of general guidelines (extend, don't duplicate)
- **Integration approach** ensures complete coverage without gaps
- **Consistent format** and structure across all guidelines
- **Regular review** and updates for both feature-specific and general guidelines

### 2. Development Quality
- **Context awareness** in all decisions
- **Safety first** in all operations
- **User control** over all commits
- **Error handling** with recovery options
- **Documentation** of all decisions

### 3. Workflow Quality
- **Automated execution** where possible
- **Manual oversight** for critical decisions
- **User authorization** for all commits
- **Safety protocols** for all operations
- **Quality gates** at each step

## Scalability Considerations

### 1. Horizontal Scaling
- **New guidelines** can be added easily
- **New templates** can be created as needed
- **New features** can be added without affecting existing work
- **New contexts** can be supported with additional guidelines

### 2. Vertical Scaling
- **Guidelines** can be made more comprehensive
- **Templates** can be made more detailed
- **Workflow** can be made more sophisticated
- **Quality gates** can be made more stringent

### 3. Maintenance Scaling
- **Regular reviews** of guidelines and templates
- **Continuous improvement** based on experience
- **Version control** of all documentation
- **Archive management** for completed work

## Security Architecture

### 1. Access Control
- **User authorization** required for all commits
- **Push operations** absolutely forbidden
- **Rollback mechanisms** for error recovery
- **Audit trails** for all operations

### 2. Data Protection
- **Sensitive data** excluded from logs
- **Secure storage** of all documentation
- **Version control** of all changes
- **Backup and recovery** procedures

### 3. Compliance
- **Guidelines compliance** enforced
- **Quality gates** at each step
- **Documentation** of all decisions
- **Regular audits** and reviews

## Performance Architecture

### 1. Execution Performance
- **Timeout enforcement** for all operations
- **Parallel execution** where possible
- **Resource management** for large operations
- **Error handling** with minimal impact

### 2. Documentation Performance
- **Efficient organization** for quick access
- **Minimal duplication** of information
- **Regular cleanup** of outdated content
- **Archive management** for completed work

### 3. Workflow Performance
- **Automated execution** where possible
- **Manual oversight** only when necessary
- **User authorization** streamlined
- **Quality gates** optimized

## Future Enhancements

### 1. Advanced Features
- **AI-assisted** standards application
- **Automated** quality assessment
- **Intelligent** template selection
- **Predictive** error prevention

### 2. Integration Features
- **CI/CD integration** for automated execution
- **Monitoring integration** for real-time feedback
- **Analytics integration** for performance insights
- **Collaboration features** for team coordination

### 3. Scalability Features
- **Multi-project** support
- **Cross-team** collaboration
- **Enterprise** integration
- **Cloud** deployment options

---

**Architecture Owner**: System Architect
**Last Updated**: 2025-10-14
**Review Cycle**: Monthly
